/*! Fractan - v0.0.0 - 2013-01-28
 * https://github.com/dvberkel/Fractan
 * Copyright (c) 2013 Daan van Berkel; Licensed MIT
 */
Fractan={version:"0.0.0"},function(e,t){var n=function(e,t){this.numerator=function(){return e},this.denominator=function(){return t}};n.prototype.isIntegral=function(){return this.denominator()===1};var r=function(e,t){return function(n){var r=e(this,n),i=t(this,n);return o(r,i)}};n.prototype.add=r(function(e,t){return t.denominator()*e.numerator()+e.denominator()*t.numerator()},function(e,t){return e.denominator()*t.denominator()}),n.prototype.multiply=r(function(e,t){return e.numerator()*t.numerator()},function(e,t){return e.denominator()*t.denominator()}),n.prototype.invert=r(function(e,t){return e.denominator()},function(e,t){return e.numerator()}),n.prototype.inverse=r(function(e,t){return-e.numerator()},function(e,t){return e.denominator()});var i=function u(e,t){return t===0?e:u(t,e%t)},s=function(e,t){return Math.floor(e/t)},o=function(e,t){var r=i(e,t);return new n(s(e,r),s(t,r))};t.fraction=o}(Backbone,Fractan),function(e,t,n,r,i){var s=n.Model.extend({defaults:{finished:!1},N:function(){return this.get("N")},finished:function(){return this.get("finished")},step:function(){var e=this.N(),n=t.first(t.filter(t.map(this.get("fractions")||[],function(t){return e.multiply(t)}),function(e){return e.isIntegral()}));n?this.set("N",n):this.set("finished",!0)}}),o=n.View.extend({template:t.template("<<%= type %>'/>"),initialize:function(){this.render()},render:function(){this.container()},container:function(){if(!this._container){var n=e(this.template({type:this.containerType()}));t.each(this.classes(),function(e){n.addClass(e)}),n.appendTo(this.$el),this._container=n}return this._container},containerType:function(){return"div"},classes:function(){return[]}}),u=o.extend({render:function(){var e=this.container();new a({el:e,model:this.model}),new h({el:e,model:this.model})},classes:function(){return["container"]}}),a=o.extend({render:function(){var e=this.container();new f({el:e,model:this.model})},classes:function(){return["N"]}}),f=o.extend({render:function(){var e=this.container();new l({el:e,model:this.model}),new c({el:e,model:this.model})},classes:function(){return["fraction"]}}),l=o.extend({classes:function(){return["numerator"]}}),c=o.extend({classes:function(){return["denominator"]}}),h=o.extend({classes:function(){return["fractions"]}});r.Model=s,r.View=u}(jQuery,_,Backbone,Fractan);